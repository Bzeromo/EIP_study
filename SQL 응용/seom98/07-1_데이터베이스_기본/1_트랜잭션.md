# 1. 트랜잭션

## 1-1. 트랜잭션의 개념

**트랜잭션(Transaction)**은 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한 번에 모두 수행되어야 하는 일련의 연산들을 의미합니다.

-   **데이터베이스에서 하나의 논리적 작업 단위**
-   **ALL or NOTHING 원칙**: 트랜잭션 내의 모든 연산이 성공적으로 완료되거나, 하나라도 실패하면 모든 연산이 취소되어야 함
-   **데이터베이스의 일관성을 보장하는 핵심 메커니즘**

## 1-2. 트랜잭션의 특성 (ACID)

-   **원자성(Atomicity)**: 트랜잭션의 연산들이 데이터베이스에 모두 반영되거나 전혀 반영되지 않아야 함
-   **일관성(Consistency)**: 트랜잭션이 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환
-   **격리성(Isolation)**: 동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 보장
-   **영속성(Durability)**: 성공적으로 완료된 트랜잭션의 결과는 영구적으로 반영되어야 함

## 1-3. 트랜잭션의 상태 변화

-   **활동 상태(Active)**: 트랜잭션이 실행 중인 상태
-   **부분 완료 상태(Partially Committed)**: 트랜잭션의 마지막 연산까지 실행했지만, 커밋 연산이 실행되기 직전의 상태
-   **완료 상태(Committed)**: 트랜잭션이 성공적으로 완료되어 커밋된 상태
-   **실패 상태(Failed)**: 트랜잭션 실행에 오류가 발생하여 중단된 상태
-   **철회 상태(Aborted)**: 트랜잭션이 취소되고 데이터베이스가 트랜잭션 시작 전 상태로 돌아간 상태

## 1-4. 트랜잭션 제어

-   **커밋(Commit)**: 트랜잭션의 모든 연산이 성공적으로 완료되었음을 선언하고, 변경사항을 데이터베이스에 영구적으로 저장
-   **롤백(Rollback)**: 트랜잭션 실행 중 오류가 발생했을 때, 트랜잭션의 모든 연산을 취소하고 데이터베이스를 트랜잭션 시작 전 상태로 되돌림
-   **체크포인트(Checkpoint)**: 데이터베이스의 일관된 상태를 저장하는 시점으로, 회복 시 참조점으로 사용

## 1-5. 병행제어

### 병행제어의 개념

**병행제어(Concurrency Control)**는 여러 트랜잭션이 동시에 실행될 때 데이터베이스의 일관성을 유지하면서 트랜잭션의 처리량을 최대화하기 위한 기법입니다.

### 병행제어의 목적

-   **데이터 일관성 유지**: 동시 실행으로 인한 데이터 불일치 방지
-   **데드락 방지**: 트랜잭션 간의 무한 대기 상태 방지
-   **성능 최적화**: 동시성과 처리량의 균형 유지

### 병행제어기법의 종류

-   **로킹(Locking)**: 데이터 항목에 대한 접근을 제어하는 기법
    -   공유 락(Shared Lock): 읽기 전용
    -   배타 락(Exclusive Lock): 읽기/쓰기 전용
-   **낙관적 검증(Optimistic Validation)**: 트랜잭션 실행 중에는 검증하지 않고, 커밋 시점에 검증하는 기법
-   **타임스탬프 순서(Timestamp Ordering)**: 각 트랜잭션에 고유한 타임스탬프를 부여하여 순서를 결정하는 기법
-   **다중버전 동시성 제어(MVCC)**: 데이터의 여러 버전을 유지하여 동시성을 보장하는 기법
-   **2PC(Two-Phase Commit)**: 분산 데이터베이스에서 트랜잭션의 원자성을 보장하는 프로토콜

## 1-6. 데이터베이스 고립화 수준

고립화 수준은 다른 트랜잭션이 현재의 데이터에 대한 무결성을 해치지 않기 위해 잠금을 설정하는 정도입니다.

### 고립화 수준의 종류

1. **Read Uncommitted**: 다른 트랜잭션의 커밋되지 않은 데이터를 읽을 수 있음
2. **Read Committed**: 커밋된 데이터만 읽을 수 있음
3. **Repeatable Read**: 트랜잭션 동안 동일한 데이터를 반복해서 읽을 수 있음
4. **Serializable**: 가장 높은 고립화 수준으로, 트랜잭션이 순차적으로 실행되는 것처럼 보임

## 1-7. 회복기법

### 회복기법의 개념

**회복기법(Recovery)**은 데이터베이스에 장애가 발생했을 때 데이터베이스를 일관된 상태로 복구하는 기법입니다.

### 회복 기법의 종류

#### 데이터베이스 회복을 위한 주요요소

-   **REDO**: 이미 완료된 트랜잭션의 변경사항을 다시 적용하는 작업
-   **UNDO**: 완료되지 않은 트랜잭션의 변경사항을 취소하는 작업

#### 회복기법의 종류

-   **로그 기반 회복 기법**: 트랜잭션의 모든 변경사항을 로그에 기록하여 회복에 활용
-   **체크 포인트 회복 기법**: 주기적으로 체크포인트를 설정하여 회복 시간을 단축
-   **그림자 페이징 회복 기법**: 현재 페이지와 그림자 페이지를 유지하여 회복을 수행
